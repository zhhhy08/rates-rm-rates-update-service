# rates-rm-rates-update-service
This page has been generated from the Hertz maven archetype, please update accordingly after creating your service

Please update this section with a brief description of the new service and it's purpose

The following information should be referred to before development commences:

* [Review Hertz Rest API Best Practices](https://hertzdigital.atlassian.net/wiki/spaces/DSA/pages/2898067729/REST+API+-+Design+Best-Practice)
* [How to run/write Tests](https://hertzdigital.atlassian.net/wiki/spaces/DSA/pages/3207299094/Testing)

To build the service and run all tests run the following command

    mvn clean test


When running the archetype the following parameters are required. These parameters relate to the openapi spec for the service

```
openapi-spec-groupId
openapi-spec-artifactId
openapi-spec-version

```
Using the parameters input above, the OpenApi generator is configured to automatically pull the service specification 
from artifactory and generate the required models and ControllerApi interfaces.

Any new Controllers should implement these generated ControllerApi interfaces

```
<plugin>
  <groupId>org.openapitools</groupId>
  <artifactId>openapi-generator-maven-plugin</artifactId>
</plugin>
```

More on how openapi code generator is configured: 
https://hertzdigital.atlassian.net/wiki/spaces/BSMD/pages/4167663713/Generate+Code+from+OpenApi+Specs

Artifactory location for service specs is: https://artifactory.devops.hertz.io/ui/native/digital-mavenlibs-dev-local/com/hertz/oas/microservice

https://hertzdigital.atlassian.net/wiki/spaces/DSA/pages/3207299094/Testing


The service contains an application-local.yaml file. This file is only used to run the service locally.
Values in the application-local.yaml file will be used to override the values in application.yaml.

To run the service locally use the following command: 

    mvn clean spring-boot:run -Dspring-boot.run.profiles=local


**Note**: Do not add any more application-xxx.yaml files e.g. for other environments.
No profiles will be applied to spring-boot services.

An OpenAPI contact autogenerated by Spring annotations will be available at the following URL paths:

* /v3/api-docs (in JSON format) - https://apimgmt.dev.htz-digital.use1.hertz.io/dev-rental/htzd-vehicle-classes/v3/api-docs
* /v3/api-docs.yaml (in YAML format)
* /swagger-ui/index.html (in Swagger UI)

To serve a static OpenAPI YAML contract instead of an autogenerated one, the Spring property ```springdoc.api-docs.enabled``` should be set to ```false```. The static OpenAPI contract classpath location can be set by setting the ```com.hertz.digital.msf.openapi.path``` property. This property has a default value of ```openapi.yaml```.

On the DEV environment, the OpenAPI contracts are available at the following URL

* https://apimgmt.dev.htz-digital.use1.hertz.io/swagger-ui
* https://apimgmt.dev.pci-digital.use1.hertz.io/swagger-ui/

**Use Actuator endpoints to get operational info about the running application:**

* https://apimgmt.dev.htz-digital.use1.hertz.io/dev-rental/htzd-vehicle-classes/actuator/health
* https://apimgmt.dev.htz-digital.use1.hertz.io/dev-rental/htzd-vehicle-classes/actuator/info
* https://apimgmt.dev.htz-digital.use1.hertz.io/dev-rental/htzd-vehicle-classes/actuator/env
* https://apimgmt.dev.htz-digital.use1.hertz.io/dev-rental/htzd-vehicle-classes/actuator/caches

**Formula:** https://apimgmt.{env}.{cluster}-digital.use1.hertz.io/{namespace}/{serviceName}/actuator/{actuatorType}

**Note:** The above four URLs work for all 6 envs from dev to prod.
Just change the {env} and {namespace} accordingly.

Below 3 lines of profiles section under spring in application.yaml pulls the actuator and swagger configuration
from the application-management.yaml in msf-super-pom/msf-library-parent/msf-autoconfigure v3.44.0.

```
spring:
  profiles:
    include:
      - management
```
